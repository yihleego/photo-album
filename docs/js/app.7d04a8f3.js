(function(e){function t(t){for(var i,s,o=t[0],l=t[1],d=t[2],c=0,h=[];c<o.length;c++)s=o[c],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&h.push(a[s][0]),a[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(h.length)h.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={app:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var u=l;r.push(["8c94","chunk-vendors"]),n()})({"3f21":function(e,t,n){e.exports=n.p+"img/tiger2.012b6eb9.jpg"},5232:function(e,t,n){"use strict";n("8107")},6219:function(e,t,n){e.exports=n.p+"img/bear2.6e7c7c57.jpg"},"62af":function(e,t,n){e.exports=n.p+"img/lion2.46dd369e.jpg"},"7e1d":function(e,t,n){e.exports=n.p+"img/leopard2.4d75e964.jpg"},8107:function(e,t,n){},"8c94":function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"contentgrid"},[t("Contentgrid",{ref:"contentgrid",attrs:{dataArray:e.datatext,loading:!0,shouldPause:!0},on:{change:e.change},scopedSlots:e._u([{key:"slidetitle",fn:function(n){var i=n.htmlText;return t("div",{},[t("div",{staticClass:"meta"},[e._v("物种")]),t("h2",{ref:"slidetitle",attrs:{id:"slide-title"}},[e._v(e._s(i.TitleName))])])}},{key:"slidestatus",fn:function(n){var i=n.htmlText;return t("div",{},[t("div",{staticClass:"meta"},[e._v("保护现状")]),t("div",{ref:"slidestatus",attrs:{id:"slide-status"}},[e._v(" "+e._s(i.StatusName)+" ")])])}}])})],1)])},r=[],s=function(){var e=this,t=e._self._c;return t("div",{ref:"contentgrid",class:e.loading&&e.loadingLook?"loading body":"body",on:{touchstart:function(t){return e.touchstartEvents(t)},touchend:function(t){return e.touchendEvents(t)},mouseover:e.pauseSlideshow,mouseleave:e.startSlideshowAgain}},[t("main",[t("div",{ref:"slider",staticClass:"slider"},[t("div",{staticClass:"slider-inner"},[t("div",{staticClass:"slider-content"},[e._t("slidetitle",null,{htmlText:e.htmlText}),e._t("slidestatus",null,{htmlText:e.htmlText})],2)]),e._l(e.datatext,(function(e){return t("img",{key:e.id,attrs:{src:e.image}})})),e.pagination?t("div",{staticClass:"pagination"},e._l(e.datatext.length,(function(n,i){return t("button",{key:i,class:e.curIdx==i?"active":"",on:{click:function(t){return e.buttonEvents(i)}}})})),0):e._e()],2)])])},o=[],l=n("109c"),d=n("5a89"),u=n("bd7e"),c=n.n(u),h={name:"Carousel",props:{dataArray:{type:Array},loading:{type:Boolean,default:!0},pagination:{type:Boolean,default:!0},autoplay:{type:Boolean,default:!0},shouldPause:{type:Boolean,default:!1},interval:{type:Number,default:3e3},intensity:{type:Number,default:.4}},watch:{dataArray:{immediate:!0,deep:!0,handler:function(e,t){this.datatext=JSON.parse(JSON.stringify(e))}}},data:function(){return{render:{renderW:0,renderH:0},canvasProperty:{canvasWidth:0,canvasHeight:0},startX:0,renderer:null,scene:null,camera:null,mat:null,curIdx:0,loadingLook:!0,AnimatingLook:!1,sliderImages:[],slideshowInterval:null,htmlText:{TitleName:"远东豹",StatusName:"极度濒危"}}},created:function(){this.$emit("myEvent")},methods:{init:function(){var e=this;c()(document.querySelectorAll("img"),(function(){e.loadingLook=!1;var t=e.$refs.slider,n=Array.from(t.querySelectorAll("img"));e.displacementSlider({parent:t,images:n}),e.animate(),e.resize()}))},animate:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)},displacementSlider:function(e){var t,n=this,i="\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n",a="\n      varying vec2 vUv;\n\n    uniform sampler2D currentImage;\n    uniform sampler2D nextImage;\n    uniform float dispFactor;\n    void main() {\n\n        vec2 uv = vUv;\n        vec4 _currentImage;\n        vec4 _nextImage;\n        float intensity = ".concat(this.$props.intensity,";\n\n        vec4 orig1 = texture2D(currentImage, uv);\n        vec4 orig2 = texture2D(nextImage, uv);\n        //计算图片x轴位移\n        float origPos1 =float(uv.x+(dispFactor * (orig2 * intensity)));\n        float origPos2 = float(uv.x -(1.0 - dispFactor) * (orig1 * intensity));\n         // 当前图片的偏移\n        _currentImage = texture2D(currentImage,vec2(origPos1,uv.y));\n        // 下一张图片的偏移\n        _nextImage = texture2D(nextImage,vec2(origPos2,uv.y));\n    \n        // 混合两张图片\n        vec4 finalTexture = mix(_currentImage, _nextImage, dispFactor);\n      \n        gl_FragColor = finalTexture;\n\n    }\n"),r=e.images;this.canvasProperty.canvasWidth=r[0].clientWidth,this.canvasProperty.canvasHeight=r[0].clientHeight;var s=e.parent,o=s.offsetWidth,l=s.offsetHeight,u=1.2,c=Math.min(o,l),h=Math.max(o,l);h===o?(this.render.renderW=c*u,this.render.renderH=c):(this.render.renderH=c*u,this.render.renderW=c);var m=new d["i"]({antialias:!1});m.setPixelRatio(window.devicePixelRatio),m.setClearColor(2303786,1),m.setSize(this.render.renderW,this.render.renderH),s.appendChild(m.domElement);var f=new d["h"];f.crossOrigin="anonymous",r.forEach((function(e){t=f.load(e.getAttribute("src")+"?v="+Date.now()),t.magFilter=t.minFilter=d["b"],t.anisotropy=m.capabilities.getMaxAnisotropy(),n.sliderImages.push(t)}));var v=new d["f"];v.background=new d["a"](2303786);var p=new d["d"](o/-2,o/2,l/2,l/-2,1,1e3);p.position.z=1;var g=new d["g"]({uniforms:{dispFactor:{type:"f",value:0},currentImage:{type:"t",value:this.sliderImages[0]},nextImage:{type:"t",value:this.sliderImages[1]}},vertexShader:i,fragmentShader:a,transparent:!0,opacity:1}),x=new d["e"](s.offsetWidth,s.offsetHeight,1),y=new d["c"](x,g);y.position.set(0,0,0),v.add(y),this.camera=p,this.renderer=m,this.mat=g,this.scene=v},resize:function(){var e=this;window.addEventListener("resize",(function(t){var n=e.$refs.slider,i=n.offsetWidth,a=n.offsetHeight,r=1.2,s=Math.min(i,a),o=Math.max(i,a);o===i?(e.render.renderW=s*r,e.render.renderH=s):(e.render.renderH=s*r,e.render.renderW=s),e.renderer.setSize(e.render.renderW,e.render.renderH)}))},TweenLiteAnimation:function(){var e=this;this.$emit("change",this.curIdx),this.AnimatingLook=!0,this.mat.uniforms.nextImage.value=this.sliderImages[this.curIdx],this.mat.uniforms.nextImage.needsUpdate=!0,l["TweenLite"].to(this.mat.uniforms.dispFactor,1,{value:1,ease:"Expo.easeInOut",onComplete:function(){e.mat.uniforms.currentImage.value=e.sliderImages[e.curIdx],e.mat.uniforms.currentImage.needsUpdate=!0,e.mat.uniforms.dispFactor.value=0,e.AnimatingLook=!1}});var t=this.$parent.$refs.slidetitle,n=this.$parent.$refs.slidestatus,i=this.datatext[this.curIdx];if(t){var a=i.TitleName;l["TweenLite"].fromTo(t,.5,{autoAlpha:1,y:0},{autoAlpha:0,y:20,ease:"Expo.easeIn",onComplete:function(){e.htmlText.TitleName=a,l["TweenLite"].to(t,.5,{autoAlpha:1,y:0})}})}if(n){var r=i.StatusName;l["TweenLite"].fromTo(n,.5,{autoAlpha:1,y:0},{autoAlpha:0,y:20,ease:"Expo.easeIn",onComplete:function(){e.htmlText.StatusName=r,l["TweenLite"].to(n,.5,{autoAlpha:1,y:0,delay:.1})}})}this.$props.autoplay&&!this.slideshowInterval&&this.startSlideshow(this.$props.interval)},pauseSlideshow:function(){this.$props.shouldPause&&this.stopSlideshow()},startSlideshowAgain:function(){this.$props.shouldPause&&this.startSlideshow(this.$props.interval)},startSlideshow:function(e){var t=this;this.slideshowInterval=setInterval((function(){var e=(t.curIdx+1)%t.sliderImages.length;t.AnimatingLook||(t.curIdx=e,t.TweenLiteAnimation())}),e)},stopSlideshow:function(){clearInterval(this.slideshowInterval),this.slideshowInterval=null},buttonEvents:function(e){this.AnimatingLook||(this.stopSlideshow(),this.curIdx=e,this.TweenLiteAnimation())},touchstartEvents:function(e){this.startX=e.touches[0].clientX},touchendEvents:function(e){if(this.startX!=e.changedTouches[0].clientX){var t=0;if(!this.AnimatingLook){this.stopSlideshow();var n=e.changedTouches[0].clientX,i=n<this.startX?-1:1;t=this.curIdx,t+=i,t<0?t=this.datatext.length-1:t>=this.datatext.length&&(t=0),this.curIdx=t,this.TweenLiteAnimation()}}}},mounted:function(){this.init(),this.$props.autoplay&&this.startSlideshow(this.$props.interval)},beforeDestroy:function(){this.stopSlideshow()}},m=h,f=(n("5232"),n("2877")),v=Object(f["a"])(m,s,o,!1,null,"0910ea76",null),p=v.exports,g=function(){var e=this,t=e._self._c;return t("div",{ref:"contentgrid",class:e.loading&&e.loadingLook?"loading body":"body",on:{touchstart:function(t){return e.touchstartEvents(t)},touchend:function(t){return e.touchendEvents(t)}}},[t("main",[t("div",{ref:"slider",staticClass:"slider"},[t("div",{staticClass:"slider-inner"},[t("div",{staticClass:"slider-content"},[e._t("slidetitle",null,{htmlText:e.htmlText}),e._t("slidestatus",null,{htmlText:e.htmlText})],2)]),e._l(e.datatext,(function(e){return t("img",{key:e.id,attrs:{src:e.image}})})),e.pagination?t("div",{staticClass:"pagination"},e._l(e.datatext.length,(function(n,i){return t("button",{key:i,class:e.curIdx==i?"active":"",on:{click:function(t){return e.buttonEvents(i)}}})})),0):e._e()],2)])])},x=[],y={name:"Contentgrid",props:{dataArray:{type:Array},loading:{type:Boolean,default:!0},pagination:{type:Boolean,default:!0},wheelEvents:{type:Boolean,default:!0},intensity:{type:Number,default:.4}},watch:{dataArray:{immediate:!0,deep:!0,handler:function(e,t){this.datatext=JSON.parse(JSON.stringify(e))}},wheelEvents:{immediate:!0,handler:function(e,t){var n=this;this.$nextTick((function(){e&&n.addWheelEvents()}))}}},data:function(){return{render:{renderW:0,renderH:0},canvasProperty:{canvasWidth:0,canvasHeight:0},startY:0,renderer:null,scene:null,camera:null,mat:null,curIdx:0,loadingLook:!0,AnimatingLook:!1,sliderImages:[],htmlText:{TitleName:"远东豹",StatusName:"极度濒危"}}},methods:{init:function(){var e=this;c()(document.querySelectorAll("img"),(function(){e.loadingLook=!1;var t=e.$refs.slider,n=Array.from(t.querySelectorAll("img"));e.displacementSlider({parent:t,images:n}),e.animate(),e.resize()}))},animate:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)},displacementSlider:function(e){var t,n=this,i="\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n",a="\n    \n    varying vec2 vUv;\n\n    uniform sampler2D currentImage;\n    uniform sampler2D nextImage;\n\n    uniform float dispFactor;\n\n    void main() {\n\n        vec2 uv = vUv;\n        vec4 _currentImage;\n        vec4 _nextImage;\n        float intensity = ".concat(this.$props.intensity,";\n\n        vec4 orig1 = texture2D(currentImage, uv);\n        vec4 orig2 = texture2D(nextImage, uv);\n        // 当前图片的偏移\n        _currentImage = texture2D(currentImage, vec2(uv.x, uv.y + dispFactor * (orig2 * intensity)));\n        // 下一张图片的偏移\n        _nextImage = texture2D(nextImage, vec2(uv.x, uv.y + (1.0 - dispFactor) * (orig1 * intensity)));\n        // 混合两张图片\n         vec4 finalTexture = mix(_currentImage, _nextImage, dispFactor);\n\n        //黑白照片效果\n        // vec4 finalTexture = mix(_currentImage, _nextImage, dispFactor);\n        // float gray = dot(finalTexture.rgb, vec3(0.299, 0.587, 0.114));\n        // finalTexture.rgb = vec3(gray);\n\n\n        gl_FragColor = finalTexture;\n\n    }\n"),r=e.images;this.canvasProperty.canvasWidth=r[0].clientWidth,this.canvasProperty.canvasHeight=r[0].clientHeight;var s=e.parent,o=s.offsetWidth,l=s.offsetHeight,u=1.2,c=Math.min(o,l),h=Math.max(o,l);h===o?(this.render.renderW=c*u,this.render.renderH=c):(this.render.renderH=c*u,this.render.renderW=c);var m=new d["i"]({antialias:!1});m.setPixelRatio(window.devicePixelRatio),m.setClearColor(2303786,1),m.setSize(this.render.renderW,this.render.renderH),s.appendChild(m.domElement);var f=new d["h"];f.crossOrigin="anonymous",r.forEach((function(e){t=f.load(e.getAttribute("src")+"?v="+Date.now()),t.magFilter=t.minFilter=d["b"],t.anisotropy=m.capabilities.getMaxAnisotropy(),n.sliderImages.push(t)}));var v=new d["f"];v.background=new d["a"](2303786);var p=new d["d"](o/-2,o/2,l/2,l/-2,1,1e3);p.position.z=1;var g=new d["g"]({uniforms:{dispFactor:{type:"f",value:0},currentImage:{type:"t",value:this.sliderImages[0]},nextImage:{type:"t",value:this.sliderImages[1]}},vertexShader:i,fragmentShader:a,transparent:!0,opacity:1}),x=new d["e"](s.offsetWidth,s.offsetHeight,1),y=new d["c"](x,g);y.position.set(0,0,0),v.add(y),this.camera=p,this.renderer=m,this.mat=g,this.scene=v},resize:function(){var e=this;window.addEventListener("resize",(function(t){var n=e.$refs.slider,i=n.offsetWidth,a=n.offsetHeight,r=1.2,s=Math.min(i,a),o=Math.max(i,a);o===i?(e.render.renderW=s*r,e.render.renderH=s):(e.render.renderH=s*r,e.render.renderW=s),e.renderer.setSize(e.render.renderW,e.render.renderH)}))},TweenLiteAnimation:function(){var e=this;this.$emit("change",this.curIdx),this.AnimatingLook=!0,this.mat.uniforms.nextImage.value=this.sliderImages[this.curIdx],this.mat.uniforms.nextImage.needsUpdate=!0,l["TweenLite"].to(this.mat.uniforms.dispFactor,1,{value:1,ease:"Expo.easeInOut",onComplete:function(){e.mat.uniforms.currentImage.value=e.sliderImages[e.curIdx],e.mat.uniforms.currentImage.needsUpdate=!0,e.mat.uniforms.dispFactor.value=0,e.AnimatingLook=!1}});var t=this.$parent.$refs.slidetitle,n=this.$parent.$refs.slidestatus,i=this.datatext[this.curIdx];if(t){var a=i.TitleName;l["TweenLite"].fromTo(t,.5,{autoAlpha:1,y:0},{autoAlpha:0,y:20,ease:"Expo.easeIn",onComplete:function(){e.htmlText.TitleName=a,l["TweenLite"].to(t,.5,{autoAlpha:1,y:0})}})}if(n){var r=i.StatusName;l["TweenLite"].fromTo(n,.5,{autoAlpha:1,y:0},{autoAlpha:0,y:20,ease:"Expo.easeIn",onComplete:function(){e.htmlText.StatusName=r,l["TweenLite"].to(n,.5,{autoAlpha:1,y:0,delay:.1})}})}},buttonEvents:function(e){this.AnimatingLook||(this.curIdx=e,this.TweenLiteAnimation())},touchstartEvents:function(e){this.startY=e.touches[0].clientY},touchendEvents:function(e){if(this.startY!=e.changedTouches[0].clientY){var t=0;if(!this.AnimatingLook){var n,i=n<this.startY?-1:1;t=this.curIdx,t+=i,t<0?t=this.datatext.length-1:t>=this.datatext.length&&(t=0),this.curIdx=t,this.TweenLiteAnimation()}}},addWheelEvents:function(){var e=this,t=0;this.$refs.contentgrid.addEventListener("wheel",(function(n){if(!e.AnimatingLook){var i=n.deltaY<0?-1:1;t=e.curIdx,t+=i,t<0?t=e.datatext.length-1:t>=e.datatext.length&&(t=0),e.curIdx=t,e.TweenLiteAnimation()}}))}},mounted:function(){this.init()}},I=y,w=(n("d579"),Object(f["a"])(I,g,x,!1,null,"6104ad24",null)),T=w.exports,A=i["a"].extend({name:"ServeDev",components:{Carousel:p,Contentgrid:T},data:function(){return{datatext:[{id:0,TitleName:"远东豹",StatusName:"极度濒危",image:n("7e1d")},{id:1,TitleName:"亚洲狮",StatusName:"濒危",image:n("62af")},{id:2,TitleName:"西伯利亚虎",StatusName:"濒危",image:n("3f21")},{id:3,TitleName:"棕熊",StatusName:"无危",image:n("6219")}]}},methods:{change:function(e){console.log(e)}}}),b=A,S=(n("a5cd"),Object(f["a"])(b,a,r,!1,null,null,null)),_=S.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(_)}}).$mount("#app")},"9b52":function(e,t,n){},a348:function(e,t,n){},a5cd:function(e,t,n){"use strict";n("a348")},d579:function(e,t,n){"use strict";n("9b52")}});
//# sourceMappingURL=app.7d04a8f3.js.map